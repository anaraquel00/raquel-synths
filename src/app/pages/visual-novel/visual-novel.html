<section class="visual-novel-catalog">
  <div class="container">

    <div class="nav-actions">
      <button routerLink="/" class="back-link">
        &larr; {{ translate.isPt() ? 'VOLTAR √Ä BASE' : 'BACK TO BASE' }}
      </button>
    </div>

    <header class="catalog-header">

      @if (currentMode === 'broklin') {
        <h1>
          {{ translate.isPt() ? 'üìö Ecos da RQS' : 'üìö RQS Echoes' }}
        </h1>
        <p>
          {{ translate.isPt()
             ? 'Onde a m√∫sica encontra o c√≥digo proibido.'
             : 'Where music meets the forbidden code.' }}
        </p>
      }

      @else {
        <h1>
          {{ translate.isPt() ? 'üî• Ecos do Caos' : 'üî• Echoes of Chaos' }}
        </h1>
        <p>
          {{ translate.isPt()
             ? 'Caos, Ru√≠do e Revolu√ß√£o. Bem-vindo √† mente do Lorde Industrial.'
             : 'Chaos, Noise, and Revolution. Welcome to the Industrial Lord\'s mind.' }}
        </p>
      }

    </header>

    <div class="synopsis-container">
      <div class="synopsis-content">

        @if (currentMode === 'broklin') {

          @if (translate.isPt()) {
            <p>
              <strong>Broklin Garpeter</strong>, um produtor Cyberpunk enigm√°tico com est√©tica g√≥tica e aura de "vampiro digital",
              entra em cena para abalar as estruturas da banda <strong>RaQuel Synths</strong>.
              Originalmente formada pelo casal <strong>Kelma Adlanko</strong> e <strong>Jonah Cyperfield</strong> (o "Lord do Metal"),
              a din√¢mica muda drasticamente quando Kelma busca um terceiro elemento.
            </p>
            <p>
              O que come√ßa como um encontro em um local sombrio na calada da noite se transforma em algo fatal.
              <strong>Sedu√ß√£o, paix√µes e intrigas</strong> v√£o mudar o rumo dessa hist√≥ria para sempre.
              N√£o perca os pr√≥ximos epis√≥dios.
            </p>
            <em class="highlight-text">üìÖ Novos Epis√≥dios: Todo Domingo | ‚ö†Ô∏è Cont√©m: Tens√£o, Romance Dark e Synthwave.</em>
          }

          @else {
            <p>
              <strong>Broklin Garpeter</strong>, an enigmatic Cyberpunk producer with a gothic aesthetic and "digital vampire" aura,
              arrives to shake the foundations of <strong>RaQuel Synths</strong>.
              Originally formed by the couple <strong>Kelma Adlanko</strong> and <strong>Jonah Cyperfield</strong> (the "Metal Lord"),
              the dynamic changes drastically when Kelma seeks a third element.
            </p>
            <p>
              What starts as a shadowy meeting in the dead of night turns into something fatal.
              <strong>Seduction, passion, and intrigue</strong> will change the course of this story forever.
              Don't miss the next episodes.
            </p>
            <em class="highlight-text">üìÖ New Episodes: Every Sunday | ‚ö†Ô∏è Contains: Tension, Dark Romance & Synthwave.</em>
          }

        }

        @else {

          @if (translate.isPt()) {
            <p>
              <strong>Jonah Cyperfield</strong> n√£o aceita c√≥digos limpos. Para ele, a m√∫sica √© guerra.
              Enquanto Broklin tenta organizar o caos, Jonah tenta destruir a ordem.
              Esta √© a hist√≥ria vista pelos olhos de quem segura o ferro de solda e a guitarra distorcida.
            </p>
            <em class="highlight-text">‚ö†Ô∏è ALERTA: ARQUIVOS DE MEM√ìRIA CORROMPIDOS DETECTADOS. [LIBERA√á√ÉO EM MAR√áO] | ‚ö†Ô∏è Cont√©m: Tens√£o, Romance Sombrio e Heavy Metal.</em>
          }

          @else {
            <p>
              <strong>Jonah Cyperfield</strong> doesn't accept clean code. For him, music is war.
              While Broklin tries to organize the chaos, Jonah tries to destroy the order.
              This is the story seen through the eyes of someone wielding a soldering iron and a distorted guitar.
            </p>
            <em class="highlight-text">‚ö†Ô∏è WARNING: CORRUPTED MEMORY FILES DETECTED. [RELEASE IN MARCH] | ‚ö†Ô∏è Contains: Tension, Dark Romance & Heavy Metal.</em>
          }

        }

      </div>
      <hr class="neon-divider">
    </div>

    <div class="episode-grid">

      @for (ep of episodes$ | async; track ep.id) {

        <div class="episode-card">

          <div class="card-image">
            <img [src]="ep.image || 'assets/images/placeholder.jpg'" [alt]="ep.title">
          </div>

          <div class="card-content">
            <span class="date" *ngIf="ep.releaseDate">
                {{ ep.releaseDate | date:'dd/MM/yyyy' }}
            </span>

            <h3>
              {{ translate.isPt() ? ep.title : (ep.title_en || ep.title) }}
            </h3>

            <p>
              {{ translate.isPt()
                 ? (ep.description || 'Clique para ler...')
                 : (ep.description_en || ep.description || 'Click to read...')
              }}
            </p>

            <button [routerLink]="['/lore-reader', ep.id]" class="btn-read">
              {{ translate.isPt() ? 'üìñ Ler Epis√≥dio' : 'üìñ Read Episode' }}
            </button>
          </div>

        </div>

      } @empty {
        <p class="loading-text">
          {{ translate.isPt() ? '‚ö† SINAL BLOQUEADO: Carregando dados...' : '‚ö† SIGNAL BLOCKED: Loading data...' }}
        </p>
      }
    </div>

  </div>
</section>
